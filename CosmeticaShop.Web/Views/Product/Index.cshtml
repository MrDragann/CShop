@using Newtonsoft.Json
@model CosmeticaShop.Web.Models.ProductsViewModel
@{
    ViewBag.Title = "Index";
}
@section Scripts {
    <script src="~/assets/js/Product/ProductFilter.js"></script>
    <script src="~/assets/js/Product/ProductModel.js"></script>
    <script src="~/assets/js/Product/ProductViewModel.js"></script>
    <script>
        var params = {};
        urlAddProductCart = '@Url.Action("AddInCart","Product")';
        urlAddProductWish = '@Url.Action("AddInWish","Product")';
        params.UrlGetProducts = '@Url.Action("Index","Product")';
        params.Products = @Html.Raw(JsonConvert.SerializeObject(Model.Products));
        params.Filter = @Html.Raw(JsonConvert.SerializeObject(Model.Filter));
        var ViewModel = new Product.ProductViewModel(params);

    </script>
}


<div class="col-md-12 white-container marginB-heigth-10">
    <div class="default-text navigation">
        <a href="@Url.Action("Index","Home")"> Principală </a> >  <a href="@Url.Action("Index","Home")"> Branduri </a> > <a href="@Url.Action("Contacts","Home")"> <span class="pink-darkk-text">Contacte</span></a>
    </div>
</div>


<div class="col-md-3 white-container" data-bind="with:ViewModel">


    <ul class="sidebar-filter" data-bind="with:Filter">
        <li>
            <div class="title-filter">
                Сategorie
            </div>
            <div class="content">
                @foreach (var category in Model.Categories)
                {
                    <div>
                        <input type="checkbox" name="category" data-bind="checked:CategoriesId" id="@category.Id @category.Name" value="@category.Id.ToString()" />
                        <label for="@category.Id @category.Name"><span></span>@category.Name</label>
                    </div>
                    foreach (var child in category.ChildCategories)
                    {
                        <div style="margin-left: 25px;">
                            <input name="category" type="checkbox" data-bind="checked:CategoriesId" id="@child.Id @child.Name" value="@child.Id.ToString()" />
                            <label for="@child.Id @child.Name"><span></span>@child.Name</label>
                        </div>
                    }
                }

            </div>
        </li>
        <li>
            <div class="title-filter">
                Brandul produsului
            </div>
            <div class="content">
                @foreach (var brand in Model.Brands)
                {
                    <div>
                        <input type="checkbox" name="brand" data-bind="checked:BrandiesId" id="@brand.Id @brand.Name" value="@brand.Id.ToString()" />
                        <label for="@brand.Id @brand.Name"><span></span>@brand.Name</label>
                    </div>
                }

            </div>
        </li>

        <li>
            <div class="title-filter">
                Tipul produsului
            </div>
            <div class="content">
                <div>
                    <input type="checkbox" id="Tipul1" name="Tipul" />
                    <label for="Tipul1"><span></span>Cremă</label>
                </div>
                <div>
                    <input type="checkbox" id="Tipul2" name="Tipul" />
                    <label for="Tipul2"><span></span>Mască</label>
                </div>
                <div>
                    <input type="checkbox" id="Tipul3" name="Tipul" />
                    <label for="Tipul3"><span></span>Cremă</label>
                </div>
            </div>
        </li>
        <li>
            <div class="title-filter">
                Îngrijirea
            </div>
            <div class="content">
                <div>
                    <input type="checkbox" id="Îngrijirea1" name="Îngrijirea" />
                    <label for="Îngrijirea1"><span></span>Feței</label>
                </div>
                <div>
                    <input type="checkbox" id="Îngrijirea2" name="Îngrijirea" />
                    <label for="Îngrijirea2"><span></span>Corpului</label>
                </div>
                <div>
                    <input type="checkbox" id="Îngrijirea3" name="Îngrijirea" />
                    <label for="Îngrijirea3"><span></span>Părului</label>
                </div>
            </div>
        </li>
        <li>
            <div class="title-filter">
                Proprietăți
            </div>
            <div class="content">
                <div>
                    <input type="checkbox" id="Proprietăți1" name="Proprietăți" />
                    <label for="Proprietăți1"><span></span>Anti-age</label>
                </div>
                <div>
                    <input type="checkbox" id="Proprietăți2" name="Proprietăți" />
                    <label for="Proprietăți2"><span></span>Curățare</label>
                </div>
            </div>
        </li>
    </ul>
</div>



<div class="col-md-9 padding-0 col-md-9-content">
    <div class="product-list" data-bind="with:ViewModel">

        <div class="product-list-content" data-bind="foreach:Products">
            <div class="col-md-4">
                <div class="item">
                    <div class="product-content">
                        <a data-bind="attr:{href:'@Url.Action("Details","Product")?id='+Id()}">
                            <div class="product-img">
                                <img data-bind="attr:{src:PhotoUrl}" />
                                <!--ko if:DiscountPrice()!==0-->
                                <div class="discount">
                                    reducere  <div>
                                        -<span data-bind="text:DiscountPercent">35</span>%
                                    </div>
                                </div>
                                <!--/ko-->
                            </div>
                        </a>
                        <a data-bind="attr:{href:'@Url.Action("Details","Product")?id='+Id()}">
                            <div class="product-description title">
                                <span class="pink-text" data-bind="text:Name">

                                </span>
                            </div>
                        </a>
                        <a data-bind="attr:{href:'@Url.Action("Details","Product")?id='+Id()}">
                            <div class="product-description">
                                <span class="grey-text" data-bind="text:Description"></span>
                            </div>
                        </a>

                        <div class="product-description">
                            <!--ko if:DiscountPrice()!==0-->
                            <span class="grey-price crossOut-pink" data-bind="text:Price()+' lei'"></span>
                            <div>
                                <span class="pink-price" data-bind="text:DiscountPrice()+' lei'"></span>
                            </div>
                            <!--/ko-->
                            <!--ko if:DiscountPrice()===0-->
                            <span class="grey-price" data-bind="text:Price()+' lei'"></span>
                            <!--/ko-->
                        </div>
                    </div>
                    <div class="product-footer">
                        <div class="pull-left" data-bind="click:AddProductWish">
                            <i class="icon-like"></i>
                        </div>
                        <div class="pull-right" data-bind="click:AddProductCart">
                            <span style="cursor: pointer;">iau!</span> <i class="icon-product-cart"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        @if (Model.Pagination.PageSize > 1)
        {
            <div class="pagination product-list-pagination">
                @if (Model.Pagination.PageNumber > 1)
                {
                    <a href="@Url.Action("Index", "Product", new {page = Model.Pagination.PageNumber - 1})">
                        <span class="prev icon-arrow-left-mini"></span>
                    </a>
                }
                <div class="content">
                    @for (int i = 1; i <= Model.Pagination.PageSize; i++)
                    {
                        <a href="@Url.Action("Index", "Product", new {page = i})">
                            <div class="block-pagination">
                                @if (Model.Pagination.PageNumber == i)
                                {
                                    <span class="num active">@i</span>
                                }
                                else
                                {
                                    <span class="num">@i</span>
                                }
                            </div>
                        </a>
                    }

                </div>
                @if (Model.Pagination.PageSize < Model.Pagination.PageNumber)
                {
                    <a href="@Url.Action("Index", "Product", new {page = Model.Pagination.PageNumber + 1})">
                        <span class="next icon-arrow-right-mini"></span>
                    </a>
                }
            </div>
        }
    </div>
</div>
